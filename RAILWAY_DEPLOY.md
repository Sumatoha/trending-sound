# ðŸš‚ Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° Railway

## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### 1. ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° (Ð½Ð° ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ðµ)

```bash
# Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ git ÐµÑÐ»Ð¸ ÐµÑ‰Ðµ Ð½Ðµ ÑÐ´ÐµÐ»Ð°Ð»Ð¸
git init
git add .
git commit -m "Initial commit"

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð½Ð° GitHub Ð¸ Ð·Ð°Ð¿ÑƒÑˆÑŒÑ‚Ðµ
git remote add origin https://github.com/Ð²Ð°Ñˆ-username/trending-sound.git
git branch -M main
git push -u origin main
```

### 2. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð½Ð° Railway

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ https://railway.app/
2. Sign Up / Login
3. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"New Project"**
4. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ **"Deploy from GitHub repo"**
5. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ `trending-sound`
6. Railway Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ñ‚ Dockerfile Ð¸ Ð½Ð°Ñ‡Ð½ÐµÑ‚ ÑÐ±Ð¾Ñ€ÐºÑƒ

### 3. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

Ð’ Railway Dashboard:

1. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ð²Ð°Ñˆ Ð¿Ñ€Ð¾ÐµÐºÑ‚
2. Ð’ÐºÐ»Ð°Ð´ÐºÐ° **"Variables"**
3. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ:

```
TELEGRAM_BOT_TOKEN=Ð²Ð°Ñˆ_Ñ‚Ð¾ÐºÐµÐ½_Ð¾Ñ‚_BotFather
DATA_DIR=/app/data
LOG_LEVEL=info
```

4. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"Save"** - Railway Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ Ð±Ð¾Ñ‚Ð°

### 4. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Volume Ð´Ð»Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…

**Ð’Ð°Ð¶Ð½Ð¾!** Ð‘ÐµÐ· Volume Ð±Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð±ÑƒÐ´ÐµÑ‚ Ñ‚ÐµÑ€ÑÑ‚ÑŒÑÑ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð´ÐµÐ¿Ð»Ð¾Ðµ.

1. Ð’ Railway Dashboard â†’ Ð²Ð°Ñˆ Ð¿Ñ€Ð¾ÐµÐºÑ‚
2. Ð¡Ð»ÐµÐ²Ð° Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ **"Volumes"** (Ð¸Ð»Ð¸ Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð½Ð° ÑÐµÑ€Ð²Ð¸Ñ â†’ Settings â†’ Volumes)
3. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"+ New Volume"**
4. Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:
   - **Mount Path**: `/app/data`
   - **Name**: Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ
5. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"Add"**
6. Railway Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ ÑÐµÑ€Ð²Ð¸Ñ Ñ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ñ‹Ð¼ Volume

### 5. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸

1. Railway Dashboard â†’ Ð²Ð°Ñˆ Ð¿Ñ€Ð¾ÐµÐºÑ‚
2. Ð’ÐºÐ»Ð°Ð´ÐºÐ° **"Deployments"** â†’ Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð´ÐµÐ¿Ð»Ð¾Ð¹
3. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"View Logs"**

Ð’Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ:
```
Starting TikTok Trending Sounds Bot...
Config loaded: DataDir=/app/data
Database initialized successfully
Authorized on account trandingsoundsbot
Bot started, listening for updates...
```

### 6. ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð±Ð¾Ñ‚Ð°

ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Telegram â†’ Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ @trandingsoundsbot â†’ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ `/start`

---

## Troubleshooting

### ÐžÑˆÐ¸Ð±ÐºÐ°: "TELEGRAM_BOT_TOKEN is required"

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ Ñ‚Ð¾ÐºÐµÐ½ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² Variables Ð¸ Ð½ÐµÑ‚ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð¾Ð²/Ð¿ÐµÑ€ÐµÐ½Ð¾ÑÐ¾Ð² ÑÑ‚Ñ€Ð¾Ðº.

### Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿ÑƒÑÑ‚Ð°Ñ Ð¿Ð¾ÑÐ»Ðµ Ð´ÐµÐ¿Ð»Ð¾Ñ

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ Volume ÑÐ¾Ð·Ð´Ð°Ð½ Ð¸ Mount Path = `/app/data`

### Ð‘Ð¾Ñ‚ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ¸
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ Ñ‚Ð¾ÐºÐµÐ½ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ (Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡ÐµÑ€ÐµÐ· @BotFather)
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ Ð´ÐµÐ¿Ð»Ð¾Ð¹ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ð»ÑÑ (Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ)

### ÐžÑˆÐ¸Ð±ÐºÐ° Ð±Ð¸Ð»Ð´Ð°

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾:
- Ð’ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ ÐµÑÑ‚ÑŒ `go.mod`, `go.sum`
- Ð’ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ ÐµÑÑ‚ÑŒ `Dockerfile`
- Ð’ÑÐµ Go Ñ„Ð°Ð¹Ð»Ñ‹ Ð·Ð°ÐºÐ¾Ð¼Ð¼Ð¸Ñ‡ÐµÐ½Ñ‹

---

## Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ

**Free tier Railway:**
- $5 Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð¼ÐµÑÑÑ†
- ~500 Ñ‡Ð°ÑÐ¾Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ (Ñ…Ð²Ð°Ñ‚Ð¸Ñ‚ Ð´Ð»Ñ Ð±Ð¾Ñ‚Ð°)
- ÐŸÐ¾ÑÐ»Ðµ $5 - ~$0.01/Ñ‡Ð°Ñ

**Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð°:**
- Ð‘Ð¾Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ 24/7 = ~$7.2/Ð¼ÐµÑ
- ÐœÐ¸Ð½ÑƒÑ $5 Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾ = **$2.2/Ð¼ÐµÑ** Ð¿Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ

**Volume:**
- ÐŸÐµÑ€Ð²Ñ‹Ðµ 1GB Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾
- SQLite Ð±Ð°Ð·Ð° Ð·Ð°Ð¹Ð¼ÐµÑ‚ ~10-50MB = Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾

---

## ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´ÐµÐ¿Ð»Ð¾Ð¸

ÐŸÐ¾ÑÐ»Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸, ÐºÐ°Ð¶Ð´Ñ‹Ð¹ `git push` Ð±ÑƒÐ´ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð´ÐµÐ¿Ð»Ð¾Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ:

```bash
# Ð’Ð½ÐµÑÐ»Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² ÐºÐ¾Ð´
git add .
git commit -m "Added new feature"
git push

# Railway Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸:
# 1. ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ñ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ
# 2. Ð¡Ð¾Ð±ÐµÑ€ÐµÑ‚ Ð½Ð¾Ð²Ñ‹Ð¹ Docker Ð¾Ð±Ñ€Ð°Ð·
# 3. Ð—Ð°Ð´ÐµÐ¿Ð»Ð¾Ð¸Ñ‚ Ð±ÐµÐ· downtime
# 4. Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ (Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ñ Volume)
```

---

## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

### ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð² Railway

Railway Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚:
- CPU usage
- Memory usage
- Network traffic
- Deployment history

### Ð›Ð¾Ð³Ð¸

Ð’ÑÐµ `log.Printf()` Ð¸Ð· ÐºÐ¾Ð´Ð° Ð¿Ð¾Ð¿Ð°Ð´Ð°ÑŽÑ‚ Ð² Railway Logs.

ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸:
```go
log.Printf("User %d registered", telegramID)
log.Printf("Collected %d sounds for %s", len(sounds), category)
log.Printf("Sent alert to %d users", count)
```

---

## ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Railway CLI (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ CLI
npm i -g @railway/cli

# Ð›Ð¾Ð³Ð¸Ð½
railway login

# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ
railway link

# ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð»Ð¾Ð³Ð¸
railway logs

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ðµ
railway run sqlite3 /app/data/sounds.db "SELECT COUNT(*) FROM users"

# ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
railway variables
```

---

## Ð ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ðµ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### Ð§ÐµÑ€ÐµÐ· Railway CLI:

```bash
# Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ
railway run cat /app/data/sounds.db > backup.db

# Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾ (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾)
railway run sh -c 'cat > /app/data/sounds.db' < backup.db
```

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð±ÑÐºÐ°Ð¿ (Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² ÐºÐ¾Ð´):

```go
// internal/scheduler/scheduler.go

func (s *Scheduler) BackupDatabase() {
    // ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð² 3:00 Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿
    s.cron.AddFunc("0 3 * * *", func() {
        source := filepath.Join(cfg.DataDir, "sounds.db")
        backup := filepath.Join(cfg.DataDir, fmt.Sprintf("backup_%s.db",
            time.Now().Format("2006-01-02")))

        // ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»
        input, _ := os.ReadFile(source)
        os.WriteFile(backup, input, 0644)

        log.Printf("Database backed up to %s", backup)
    })
}
```

---

## Ð“Ð¾Ñ‚Ð¾Ð²Ð¾!

Ð‘Ð¾Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ 24/7 Ð½Ð° Railway, Ð±Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ, Ð°Ð²Ñ‚Ð¾Ð´ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½.

**Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ ÑˆÐ°Ð³:** ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ ÑÐ¾Ð±Ð¸Ñ€Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹! ðŸš€
